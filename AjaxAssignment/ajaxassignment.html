<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>JavaScript - Homework 8</title>
    </head>

<style>
body {
  background-color: #f0f8ff; 
  font-family: 'Arial', sans-serif; 
  color: #333; 
  margin: 0;
  padding: 0;
}
h1 {
  text-align: center;
  font-size: 2.5em;
  margin-top: 20px;
  color: #005f99;
}

a:hover {
  text-decoration: underline;
}
button {
  display: block;
  margin: 20px auto;
  padding: 10px 20px;
  font-size: 1.1em;
  color: #fff;
  background-color: #007acc;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}
button:hover {
  background-color: #005f99;
}
table {
  margin: 20px auto;
  border: 1px solid #ccc;
  border-collapse: collapse;
  width: 80%;
  font-size: 1.1em;
}
th, td {
  border: 1px solid #ccc;
  padding: 10px;
  text-align: left;
}
th {
  background-color: #005f99;
  color: white;
}
td {
  background-color: #e6f7ff;
}
h2 {
  text-align: center;
  color: #005f99;
  font-size: 2em;
  margin-top: 30px;
}
p {
  margin: 20px auto;
  width: 80%;
  line-height: 1.6;
  font-size: 1.1em;
  color: #333;
  margin-bottom: 2em;
}
</style>

<body>

<h1>Homework 8 - AJAX Application</h1>


<button type="button" onclick="loadDoc()">Get CD collection</button>
<br><br>
<table id="demo"></table>

<script>
function loadDoc() {
  const xhttp = new XMLHttpRequest();
  xhttp.onload = function() {
    myFunction(this);
  }
  xhttp.open("GET", "cd_catalog.xml");
  xhttp.send();
}

function myFunction(xml) {
  const xmlDoc = xml.responseXML;
  const x = xmlDoc.getElementsByTagName("CD");

  let table = "<tr><th>Artist</th><th>Title</th></tr>";

  for (let i = 0; i < x.length; i++) {
    table += "<tr><td>" +
      x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue + "</td><td>" +
      x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
      "</td></tr>";
  }

  document.getElementById("demo").innerHTML = table;
}
</script>

<h2>Explanation of AJAX</h2>
<p class="double-space">The JavaScript code in this file uses AJAX to retrieve data from the <code>cd_catalog.xml</code> file. When the user clicks the button, the <code>loadDoc()</code> function is triggered. This function creates a new <code>XMLHttpRequest</code> object and sends a GET request to fetch the XML file. The <code>onload</code> property specifies a function, <code>myFunction()</code>, which is called when the request is successfully completed. In <code>myFunction()</code>, the XML data is parsed, and a table is dynamically created to display the artist and title information on the webpage.</p>

<h2>REST API</h2>
<p class="double-space">For this report, we explored the OpenWeatherMap API, which provides weather data for any location. The API returns data in JSON format, which is easy to parse and use in JavaScript. To use this API, developers need to sign up and obtain an API key. Free access is available for basic usage, while paid plans offer additional features like higher request limits and historical weather data. Detailed documentation can be found on the <a href="https://openweathermap.org/api">OpenWeatherMap API Documentation</a>, which provides instructions for making requests and handling responses effectively. We recommend using this API in our weather-based web application for real-time data, enhancing user experience and engagement.</p>

<ul>
  <li><a href="https://hills.ccsf.edu/~jyu165/hw1.html">Main Page</a></li>
</ul>
</body>
</html>
